<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<head>
		<title>TimestampPicker</title>
	</head>

	<body>

		<composite:interface>
			<composite:attribute name="value" />
			<composite:attribute name="disabled" />
			<composite:attribute name="required" default="false" />
			<composite:attribute name="onchange" default="" />
			<composite:attribute name="converter" default="customTimestampConverter" />
			<composite:attribute name="pattern" default="dd/MM/yyyy HH:mm" />
			<composite:attribute name="datePatternJs" default="dd/mm/yy" />
			<composite:attribute name="timePatternJs" default="HH:mm" />
			<composite:attribute name="styleClass" default="dateTime" />
			<composite:attribute name="size" default="16"/>
			<composite:attribute name="label"/>
			<composite:editableValueHolder name="input" targets="dateInput" />
		</composite:interface>

		<composite:implementation>

			<h:inputText class="time-picker #{cc.attrs.styleClass}" value="#{cc.attrs.value}" id="dateInput"
				onchange="#{cc.attrs.onchange};" onkeypress="#{cc.attrs.onchange};"
				maxlength="#{cc.attrs.size}" disabled="#{cc.attrs.disabled}" required="#{cc.attrs.required}" label="#{cc.attrs.label}">

				<f:converter converterId="#{cc.attrs.converter}" pattern="#{cc.attrs.pattern}"/>
				<composite:insertChildren />
			</h:inputText>

			<ui:fragment rendered="#{!cc.attrs.disabled}">
			<script type="text/javascript">
			/* <![CDATA[ */
				$(document).ready(function() {
					$("#mainForm\\:#{cc.attrs.id}\\:dateInput").datetimepicker({
						altFormat: "#{cc.attrs.datePatternJs}",
						buttonImage: "#{application.contextPath}/javax.faces.resource/ico_cal.png.jsf?ln=img",
						buttonImageOnly: true,
						controlType: 'select',
						dateFormat: "#{cc.attrs.datePatternJs}",
						showButtonPanel: true,
						showOn: "button",
						showTime: false,
						showWeek: true,
						timeFormat: "#{cc.attrs.timePatternJs}",
						useLocalTimezone: true
					});
				});
			/* ]]> */
			</script>
			</ui:fragment>
		</composite:implementation>
	</body>
</html>